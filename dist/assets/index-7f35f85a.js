(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const e of s)if(e.type==="childList")for(const r of e.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function o(s){const e={};return s.integrity&&(e.integrity=s.integrity),s.referrerpolicy&&(e.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?e.credentials="include":s.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function n(s){if(s.ep)return;s.ep=!0;const e=o(s);fetch(s.href,e)}})();const a={currentDate:document.querySelector(".current-date"),currentList:document.querySelector(".current-list"),todoFormDiv:document.querySelector(".todo-form"),todoForm:document.querySelector(".todo-form form"),addTodo:document.querySelector(".add-todo"),addList:document.querySelector(".add-project"),listFormDiv:document.querySelector(".list-form"),listForm:document.querySelector(".list-form form"),listFormInput:document.querySelector("#list"),todosWrapper:document.querySelector(".todos"),listsWrapper:document.querySelector("#lists"),todoCount:document.querySelector(".how-many"),listDropdown:document.querySelector("#list-dropdown")},T=d=>d.replace(/-/g," "),g=d=>d.replace(/\s+/g,"-"),y=d=>d.dataset.name;class v{constructor(t){this.todos=t}toggleTodoForm(t){t.offsetParent?t.style.display="none":t.style.display="block"}toggleEdit(t){const o=t.target.closest(".todo").children[0].children,n=t.target.closest(".todo").children[1].children[0],s=[].slice.call(o);s.push(n),s.forEach(e=>{e.disabled?e.disabled=!1:e.disabled=!0})}renderTodos(t,o,n){t.innerHTML="";const s=o(n);for(let e=0;e<s.length;e++){const r=document.createElement("div");r.classList.add("todo"),r.setAttribute("id",s[e].id);const i=document.createElement("div");i.classList.add("text");const l=document.createElement("div");l.classList.add("completion");const u=document.createElement("input");u.setAttribute("id","todo-title");const c=document.createElement("input");c.setAttribute("id","todo-date");const m=document.createElement("input");m.setAttribute("id","done");const L=document.createElement("i");L.classList.add("edit","fa-solid","fa-pen-to-square");const h=document.createElement("button");h.classList.add("delete");const f=document.createElement("i");f.classList.add("fa-solid","fa-trash"),u.setAttribute("type","text"),u.setAttribute("name","todo-title"),u.setAttribute("value",s[e].title),u.setAttribute("disabled",!0),c.setAttribute("type","date"),c.setAttribute("name","todo-date"),c.value=s[e].due,c.setAttribute("required",!0),c.setAttribute("disabled",!0),m.setAttribute("type","checkbox"),m.setAttribute("name","done"),m.setAttribute("disabled",!0),m.checked=s[e].completed,h.appendChild(f),i.appendChild(u),i.appendChild(c),l.appendChild(m),l.appendChild(L),l.appendChild(h),r.appendChild(i),r.appendChild(l),t.appendChild(r)}}resetTitleAndDate(t){t[0].value="",t[1].value=""}updateTodoListCount(t,o){document.querySelector(`[data-name='${o}'] .how-many`).textContent=t(o)}updateTodoFormListSelection(t){const o=g(t);document.querySelector(`option[value='${o}']`).selected=!0}updateTodoListTitle(t){a.currentList.dataset.name=g(t),a.currentList.textContent=t}handleTodoFormToggle(t){a.addTodo.addEventListener("click",()=>{a.listFormDiv.style.display!=="block"&&this.toggleTodoForm(a.todoFormDiv)})}handleTodoEdit(t){document.addEventListener("click",o=>{o.target.closest(".edit")&&this.toggleEdit(o)})}}let b=(d=21)=>crypto.getRandomValues(new Uint8Array(d)).reduce((t,o)=>t+=(o&=63)<36?o.toString(36):o<62?(o-26).toString(36).toUpperCase():o>62?"-":"_","");class S{constructor(t){this.todos={All:[],completed:[]}}removeList(t){delete this.todos[t],this.pushToLocalStorage()}localIsEmpty(){return localStorage.getItem("todos")===null}clearLocalStorage(){return localStorage.clear()}setDataFromLocal(t){this.todos=JSON.parse(t)}pushToLocalStorage(){localStorage.setItem("todos",JSON.stringify(this.todos))}getTodosFromLocalStorage(t){const o=localStorage.getItem("todos");this.localIsEmpty()?t.innerHTML="":this.setDataFromLocal(o)}}const p=new S;class E{constructor(){this.storage=p}delete(t,o){const n=g(o),s=this.storage.todos[n].findIndex(e=>e.id===t);this.storage.todos[n].splice(s,1),p.pushToLocalStorage()}updateEdit(t,o,n,s,e){const r=g(o);for(let i=0;i<this.storage.todos[r].length;i++)this.storage.todos[r][i].id===t&&(this.storage.todos[r][i].title=n,this.storage.todos[r][i].due=s,this.storage.todos[r][i].completed=e);p.pushToLocalStorage()}getUpdatedValues(t,o,n){o(t);const s=n.id,e=n.parentElement.previousElementSibling.textContent,r=n.children[0].children[0].value,i=n.children[0].children[1].value,l=n.children[1].children[0].checked;this.updateEdit(s,e,r,i,l)}saveData(t){const o=t.get("list");let n={id:b(),title:t.get("title"),due:t.get("due"),completed:!1};return this.storage.todos[o].push(n),this.storage.pushToLocalStorage(),n}getTodos(t){return this.storage.todos[t]}getTodoListLength(t){return this.storage.todos[t].length}}class C{constructor(t){this.lists=t}toggleListForm(t){t.offsetParent?t.style.display="none":t.style.display="block"}renderLists(t,o,n){const s=o();t.innerHTML="";for(let e=0;e<s.length;e++){let r=s[e],i=T(r);const l=document.createElement("div");l.dataset.name=r,l.classList.add("list");const u=document.createElement("p");u.classList.add("list-name");const c=document.createElement("p");c.classList.add("how-many"),c.textContent=n.todos[s[e]].length;const m=document.createElement("i");m.classList.add("list-del","fa-solid","fa-trash"),u.textContent=i,l.appendChild(u),l.appendChild(c),l.appendChild(m),t.appendChild(l)}}noListName(t){return t===""}getListName(){return a.listFormInput.value}updateListCount(t){document.querySelectorAll(".list").forEach(o=>{const n=o.children[1];n.textContent=t.todos[o.dataset.name].length})}createListSelection(t,o){const n=document.createElement("option"),s=g(t);n.setAttribute("value",s),n.textContent=t,o.appendChild(n)}handleListFormToggle(t){a.addList.addEventListener("click",()=>{a.todoFormDiv.style.display!=="block"&&this.toggleListForm(a.listFormDiv)})}}class F{constructor(){this.storage=p}addListToStorage(t){const o=g(t);this.storage.todos[o]=[],this.storage.pushToLocalStorage()}getLists(){return Object.keys(this.storage.todos)}delete(t){document.querySelector(`[data-name='${t}']`).remove(),p.removeList(t)}edit(){}}document.addEventListener("DOMContentLoaded",()=>{const t=new Date().toString().split(" ").slice(0,4).join(" ");a.currentDate.textContent=t,p.getTodosFromLocalStorage(a.todosWrapper)});const A=()=>{const d=new C,t=new F;d.handleListFormToggle(),a.listForm.addEventListener("submit",o=>{o.preventDefault();const{listForm:n,listFormInput:s,listFormDiv:e,listsWrapper:r,listDropdown:i}=a,l=d.getListName(s);d.noListName(l)||(t.addListToStorage(l),d.toggleListForm(e),d.renderLists(r,t.getLists.bind(t),p),d.createListSelection(l,i),n.reset())}),document.addEventListener("click",o=>{const n=o.target.closest(".list-del");if(!(n&&n.parentElement.dataset.name==="All")&&n){const s=n.parentElement,e=y(s);t.delete(e)}}),document.addEventListener("DOMContentLoaded",()=>{d.renderLists(a.listsWrapper,t.getLists.bind(t),p),t.getLists().forEach(n=>{d.createListSelection(n,a.listDropdown)})})};A();const D=()=>{const d=new v,t=new E,{todoForm:o,todoFormDiv:n,todosWrapper:s}=a;d.handleTodoFormToggle(),o.addEventListener("submit",e=>{e.preventDefault();const r=new FormData(o);if(r.get("title")==="")return;t.saveData(r);const i=r.get("list");d.toggleTodoForm(n),d.renderTodos(s,t.getTodos.bind(t),i),d.updateTodoListCount(t.getTodoListLength.bind(t),i),d.resetTitleAndDate(o)}),document.addEventListener("click",e=>{if(e.target.closest(".edit")){const r=e.target.closest(".todo");r.children[0].children[0].disabled?d.toggleEdit(e):t.getUpdatedValues(e,d.toggleEdit,r)}}),document.addEventListener("click",e=>{if(e.target.closest(".delete")){const r=e.target.closest(".todo"),i=r.id,l=r.parentElement.previousElementSibling.dataset.name;t.delete(i,l),d.renderTodos(a.todosWrapper,t.getTodos.bind(t),l),d.updateTodoListCount(t.getTodoListLength.bind(t),l)}}),document.addEventListener("click",e=>{if(e.target.closest(".list-name")){const r=e.target.textContent,i=g(r);d.updateTodoFormListSelection(r),d.updateTodoListTitle(r),d.renderTodos(a.todosWrapper,t.getTodos.bind(t),i)}}),document.addEventListener("click",e=>{if(e.target.closest("option")){const r=e.target.closest("option").value,i=g(r);d.updateTodoListTitle(r),d.renderTodos(a.todosWrapper,t.getTodos.bind(t),i)}}),document.addEventListener("DOMContentLoaded",()=>{d.renderTodos(a.todosWrapper,t.getTodos.bind(t),"All"),d.updateTodoListTitle("All")})};D();
