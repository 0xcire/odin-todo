(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const r of d.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function e(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerpolicy&&(d.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?d.credentials="include":o.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(o){if(o.ep)return;o.ep=!0;const d=e(o);fetch(o.href,d)}})();const c={showNav:document.querySelector(".show-nav"),hideNav:document.querySelector(".hide-nav"),sidebar:document.querySelector("#sidebar"),currentDate:document.querySelector(".current-date"),currentList:document.querySelector(".current-list"),todoFormDiv:document.querySelector(".todo-form"),todoForm:document.querySelector(".todo-form form"),addTodo:document.querySelector(".add-todo"),addList:document.querySelector(".add-project"),listFormDiv:document.querySelector(".list-form"),listForm:document.querySelector(".list-form form"),listFormInput:document.querySelector("#list"),listClose:document.querySelector(".list-form-cancel"),todoClose:document.querySelector(".todo-form-cancel"),todosWrapper:document.querySelector(".todos"),listsWrapper:document.querySelector("#lists"),todoCount:document.querySelector(".how-many"),listDropdown:document.querySelector("#list-dropdown")},E=n=>n.replace(/-/g," "),v=n=>n.replace(/\s+/g,"-"),w=n=>{const t=n;t.style.display="block"},F=n=>{const t=n;t.style.display="none"},D=n=>{n.forEach(e=>{e.disabled=!1,e.style.color="var(--accent-color)"})},k=n=>{n.forEach(e=>{e.disabled=!0,e.style.color="var(--tertiary-color)"})},L=(n,t,e="All")=>{const s=n;s.innerHTML="";const o=t;for(let d=0;d<o.length;d+=1){const r=document.createElement("div");r.classList.add("todo"),r.setAttribute("id",o[d].id),r.dataset.name=e;const l=document.createElement("div");l.classList.add("text");const a=document.createElement("div");a.classList.add("completion");const u=document.createElement("input");u.setAttribute("id","todo-title");const m=document.createElement("input");m.setAttribute("id","todo-date");const p=document.createElement("input");p.setAttribute("id","done");const g=document.createElement("i");g.classList.add("edit","fa-solid","fa-pen-to-square");const f=document.createElement("button");f.classList.add("delete");const S=document.createElement("i");S.classList.add("fa-solid","fa-trash"),u.setAttribute("type","text"),u.setAttribute("name","todo-title"),u.setAttribute("value",o[d].title),u.setAttribute("disabled",!0),m.setAttribute("type","date"),m.setAttribute("name","todo-date"),m.value=o[d].due,m.setAttribute("required",!0),m.setAttribute("disabled",!0),p.setAttribute("type","checkbox"),p.setAttribute("name","done"),p.setAttribute("disabled",!0),p.checked=o[d].completed,f.appendChild(S),l.appendChild(u),l.appendChild(m),a.appendChild(p),a.appendChild(g),a.appendChild(f),r.appendChild(l),r.appendChild(a),n.appendChild(r)}},x=n=>{const t=n[0],e=n[1];t.value="",e.value=""},N=n=>{document.querySelector(`option[value='${n}']`).selected=!0},y=(n="All")=>{c.currentList.dataset.name=n,c.currentList.textContent=E(n)},O=()=>{const{addTodo:n,todoClose:t,todoForm:e,todoFormDiv:s,listFormDiv:o}=c;n.addEventListener("click",()=>{o.style.display!=="block"&&(w(s),window.innerWidth<1080&&(c.sidebar.style.transform="translate(-100%, 0)"))}),t.addEventListener("click",()=>{F(s),e.reset()})};let W=(n=21)=>crypto.getRandomValues(new Uint8Array(n)).reduce((t,e)=>(e&=63,e<36?t+=e.toString(36):e<62?t+=(e-26).toString(36).toUpperCase():e>62?t+="-":t+="_",t),"");class I{constructor(){this.todos={All:[]}}removeList(t){delete this.todos[t],this.pushToLocalStorage()}static localIsEmpty(){return localStorage.getItem("todos")===null}static clearLocalStorage(){return localStorage.clear()}setDataFromLocal(t){this.todos=JSON.parse(t)}pushToLocalStorage(){localStorage.setItem("todos",JSON.stringify(this.todos))}getTodosFromLocal(t){const e=t,s=localStorage.getItem("todos");this.constructor.localIsEmpty()?e.innerHTML="":this.setDataFromLocal(s)}}const h=new I;class M{constructor(){this.storage=h}delete(t,e){const s=v(e),o=this.storage.todos[s].findIndex(d=>d.id===t);this.storage.todos[s].splice(o,1),h.pushToLocalStorage()}updateEdit(t,e,s){const o=v(e),[d,r,l]=s;for(let a=0;a<this.storage.todos[o].length;a+=1)this.storage.todos[o][a].id===t&&(this.storage.todos[o][a].title=d,this.storage.todos[o][a].due=r,this.storage.todos[o][a].completed=l);h.pushToLocalStorage()}static getUpdatedValues(t){return t.map(s=>s.type==="checkbox"?s.checked:s.value)}saveData(t){const e=t.get("list"),s={id:W(),title:t.get("title"),due:t.get("due"),completed:!1};return this.storage.todos[e].push(s),this.storage.pushToLocalStorage(),s}getTodos(t="All"){return this.storage.todos[t]}getTotalTodos(t){return this.storage.todos[t].length}}const A=n=>{const t=n;t.style.display="none"},$=n=>{const t=n;t.style.display="block"},b=(n,t,e)=>{const s=t,o=n;o.innerHTML="";for(let d=0;d<s.length;d+=1){const r=s[d],l=e.todos[s[d]].length,a=E(r),u=document.createElement("div");u.dataset.name=r,u.classList.add("list");const m=document.createElement("div");m.classList.add("description");const p=document.createElement("p");p.classList.add("list-name");const g=document.createElement("p");g.classList.add("how-many"),g.textContent=l;const f=document.createElement("i");f.classList.add("list-del","fa-solid","fa-trash"),p.textContent=a,m.appendChild(p),m.appendChild(g),u.appendChild(m),u.appendChild(f),n.appendChild(u)}},C=(n,t)=>{document.querySelector(`[data-name="${t}"] .how-many`).textContent=n},T=(n,t)=>{const e=document.createElement("option"),s=v(n);e.setAttribute("value",s),e.textContent=n,t.appendChild(e)},U=n=>{document.querySelector(`option[value=${n}]`).remove()},H=()=>{c.sidebar.style.transform="translate(0,0)"},q=()=>{c.sidebar.style.transform="translate(-100%, 0)"},V=()=>{c.showNav.addEventListener("click",()=>{H()}),c.hideNav.addEventListener("click",()=>{q()})},j=()=>{const{addList:n,listClose:t,listForm:e,listFormDiv:s,todoFormDiv:o}=c;n.addEventListener("click",()=>{o.style.display!=="block"&&$(s)}),t.addEventListener("click",()=>{A(s),e.reset()})};class J{constructor(){this.storage=h}addListToStorage(t){const e=v(t);this.storage.todos[e]=[],this.storage.pushToLocalStorage()}getTodos(t){return this.storage.todos[t]}getLists(){return Object.keys(this.storage.todos)}delete(t){document.querySelector(`[data-name='${t}']`).remove(),this.storage.removeList(t)}}const i={list:new J,todo:new M};document.addEventListener("DOMContentLoaded",()=>{const n=new Date,t=new Intl.DateTimeFormat("en-US").format(n);c.currentDate.textContent=t,h.getTodosFromLocal(c.todosWrapper)});const P=()=>{const{listFormInput:n,listsWrapper:t,listDropdown:e}=c;j(),V(),c.listForm.addEventListener("submit",s=>{s.preventDefault();const o=n.value;i.list.addListToStorage(o),A(s.target.parentElement);const d=i.list.getLists();b(t,d,h),T(o,e),s.target.reset()}),document.addEventListener("click",s=>{const o=s.target.closest(".list-del");if(o){const r=o.parentElement.dataset.name;if(r==="All")return;i.list.delete(r),U(r);const l=i.todo.getTodos();L(c.todosWrapper,l),y()}}),document.addEventListener("DOMContentLoaded",()=>{const s=i.list.getLists();b(t,s,h),s.forEach(o=>{T(o,e)})})};P();const K=()=>{const{todoForm:n,todosWrapper:t}=c;O(),n.addEventListener("submit",e=>{e.preventDefault();const s=new FormData(n);i.todo.saveData(s);const o=s.get("list");F(e.target.parentElement);const d=i.todo.getTodos(o);L(t,d,o);const r=i.todo.getTotalTodos(o);C(r,o),x(n)}),document.addEventListener("click",e=>{if(e.target.closest(".edit")){const s=e.target.closest(".todo"),{id:o}=s,d=document.querySelector(".current-list").textContent,r=s.children[0].children,l=s.children[1].children[0],a=[].slice.call(r);if(a.push(l),r[0].disabled)D(a);else{k(a);const u=i.todo.constructor.getUpdatedValues(a);i.todo.updateEdit(o,d,u)}}}),document.addEventListener("click",e=>{if(e.target.closest(".delete")){const s=e.target.closest(".todo"),{id:o}=s,d=s.dataset.name;i.todo.delete(o,d);const r=i.todo.getTodos(d);L(c.todosWrapper,r,d);const l=i.todo.getTotalTodos(d);C(l,d)}}),document.addEventListener("click",e=>{if(e.target.closest(".list-name")){const s=e.target.textContent,o=v(s);N(o),y(o);const d=i.todo.getTodos(o);L(c.todosWrapper,d,o),window.innerWidth<1080&&q()}}),document.addEventListener("click",e=>{if(e.target.closest("option")){const s=e.target.closest("option").value,o=E(s);y(o);const d=i.todo.getTodos(s);L(c.todosWrapper,d,s)}}),document.addEventListener("DOMContentLoaded",()=>{const e=i.todo.getTodos();L(c.todosWrapper,e),y()})};K();
