(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=e(o);fetch(o.href,i)}})();let v=(n=21)=>crypto.getRandomValues(new Uint8Array(n)).reduce((t,e)=>(e&=63,e<36?t+=e.toString(36):e<62?t+=(e-26).toString(36).toUpperCase():e>62?t+="-":t+="_",t),"");class C{constructor(){this.last="Todos",this.todos={Todos:[],Complete:[]}}removeList(t){delete this.todos[t],this.pushToLocalStorage()}static localIsEmpty(){return localStorage.getItem("todos")===null}static clearLocalStorage(){return localStorage.clear()}setDataFromLocal(t){this.last=t.last,this.todos=t.todos}pushToLocalStorage(){Object.keys(this).forEach(t=>{localStorage.setItem(t,JSON.stringify(this[t]))})}getDataFromLocal(){const t=localStorage.getItem("last"),e=localStorage.getItem("todos"),s={last:JSON.parse(t),todos:JSON.parse(e)};this.constructor.localIsEmpty()?this.todos={Todos:[],Complete:[]}:this.setDataFromLocal(s)}}const p=new C,g=n=>n.replace(/-/g," "),b=n=>n.replace(/\s+/g,"-"),y=n=>{const t=n;for(let e=0;e<t.length;e+=1)t[e].tabIndex=0},S=n=>{const t=n;for(let e=0;e<t.length;e+=1)t[e].tabIndex=-1};class V{constructor(){this.storage=p}delete(t,e){const s=b(e),o=this.storage.todos[s].findIndex(i=>i.id===t);this.storage.todos[s].splice(o,1),p.pushToLocalStorage()}updateEdit(t,e,s){const o=b(e),[i,a,c]=s;for(let d=0;d<this.storage.todos[o].length;d+=1)this.storage.todos[o][d].id===t&&(this.storage.todos[o][d].title=i,this.storage.todos[o][d].due=a,this.storage.todos[o][d].completed=c);p.pushToLocalStorage()}static getUpdatedValues(t){return[...t].map(s=>s.type==="checkbox"?s.checked:s.value)}saveData(t){const e=t.get("list"),s={id:v(),title:t.get("title"),due:t.get("due"),completed:!1};return this.storage.todos[e].push(s),this.storage.pushToLocalStorage(),s}getTodos(t="Todos"){return this.storage.todos[t]}getTotalTodos(t){return this.storage.todos[t].length}addToCompleted(t,e){const s=this.storage.todos[t].findIndex(i=>i.id===e),o=this.storage.todos[t].splice(s,1);this.storage.todos.Complete.push(o[0]),this.storage.pushToLocalStorage()}}class k{constructor(){this.storage=p}addListToStorage(t){const e=b(t);this.storage.todos[e]=[],this.storage.pushToLocalStorage()}getTodos(t="Todos"){return this.storage.todos[t]}clearTodos(t="Todos"){this.storage.todos[t]=[],this.storage.pushToLocalStorage()}getLists(){return Object.keys(this.storage.todos)}delete(t){this.storage.removeList(t)}getListCounts(){return Object.keys(this.storage.todos).map(e=>this.storage.todos[e].length)}setLastViewedList(t="Todos"){this.storage.last=t,this.storage.pushToLocalStorage()}getLastViewed(){return this.storage.last}}class O{constructor(){this.formWrapper=document.querySelector(".todo-form"),this.form=document.querySelector(".todo-form form"),this.container=document.querySelector(".todos"),this.title=document.querySelector(".current-list"),this.addTodo=document.querySelector(".add-todo"),this.todoClose=document.querySelector(".todo-form-cancel"),this.sidebar=document.querySelector("#sidebar"),this.listSelect=document.querySelector("#list-dropdown"),this.currentList=document.querySelector(".current-list")}showForm(){this.formWrapper.style.display="block",this.form[0].focus()}hideForm(){this.formWrapper.style.display="none"}enableEdit(t){t.forEach(s=>{s.disabled=!1,s.style.color="var(--accent-color)"})}disableEdit(t){t.forEach(s=>{s.disabled=!0,s.style.color="var(--tertiary-color)"})}renderTodos(t,e="Todos"){this.container.innerHTML="";const s=t;for(let o=0;o<s.length;o+=1){const i=document.createElement("div");i.classList.add("todo"),i.setAttribute("id",s[o].id),i.dataset.name=e;const a=document.createElement("div");a.classList.add("text");const c=document.createElement("div");c.classList.add("completion");const d=document.createElement("input");d.setAttribute("id","todo-title"),d.dataset.name=`${s[o].id}-input`;const r=document.createElement("input");r.setAttribute("id","todo-date"),r.dataset.name=`${s[o].id}-input`;const l=document.createElement("input");l.setAttribute("id","done"),l.dataset.name=`${s[o].id}-input`;const h=document.createElement("i");h.tabIndex=0,h.classList.add("edit","fa-solid","fa-pen-to-square");const u=document.createElement("button");u.classList.add("delete");const m=document.createElement("i");m.classList.add("fa-solid","fa-trash"),d.setAttribute("type","text"),d.setAttribute("name","todo-title"),d.setAttribute("value",s[o].title),d.setAttribute("disabled",!0),r.setAttribute("type","date"),r.setAttribute("name","todo-date"),r.value=s[o].due,r.setAttribute("required",!0),r.setAttribute("disabled",!0),l.setAttribute("type","checkbox"),l.setAttribute("name","done"),l.setAttribute("disabled",!0),l.checked=s[o].completed,u.appendChild(m),a.appendChild(d),a.appendChild(r),c.appendChild(l),c.appendChild(h),c.appendChild(u),i.appendChild(a),i.appendChild(c),this.container.appendChild(i)}}resetTitleAndDate(){for(let t=0;t<this.form.length-3;t+=1)this.form[t].value=""}updateTodoFormListSelection(t){t!=="Complete"&&(document.querySelector(`option[value='${t}']`).selected=!0)}updateTodoListTitle(t="Todos"){this.currentList.dataset.name=t,this.currentList.textContent=g(t)}bindTodoFormEvents(){this.addTodo.addEventListener("click",()=>{this.formWrapper.nextElementSibling.style.display!=="block"&&(this.showForm(),window.innerWidth<1080&&(this.sidebar.style.transform="translate(-100%, 0)"))}),this.todoClose.addEventListener("click",()=>{this.hideForm(),this.form.reset()})}bindTodoSubmit(t){this.form.addEventListener("submit",e=>{e.preventDefault(),t(e)})}bindTodoEdit(t){document.addEventListener("click",e=>{e.target.closest(".edit")&&t(e)}),document.addEventListener("keydown",e=>{e.key==="Enter"&&e.target.closest(".edit")&&t(e)})}bindTodoDelete(t){document.addEventListener("click",e=>{e.target.closest(".delete")&&t(e)}),document.addEventListener("keydown",e=>{e.key==="Enter"&&e.target.matches(".delete")&&t(e)})}bindTodoSelectChange(t){this.listSelect.addEventListener("change",e=>{t(e)})}bindTodoOnLoad(t){t()}}class q{constructor(){this.date=document.querySelector(".current-date"),this.formWrapper=document.querySelector(".list-form"),this.form=document.querySelector(".list-form form"),this.container=document.querySelector("#lists"),this.addList=document.querySelector(".add-project"),this.formClose=document.querySelector(".list-form-cancel"),this.listDropdown=document.querySelector("#list-dropdown"),this.sidebar=document.querySelector("#sidebar"),this.showNav=document.querySelector(".show-nav"),this.hideNav=document.querySelector(".hide-nav")}setHeading(){const t=new Date,e=new Intl.DateTimeFormat("en-US").format(t);this.date.textContent=e}hideForm(){this.formWrapper.style.display="none"}showForm(){this.formWrapper.style.display="block",this.form.children[1].focus()}renderLists(t,e){const s=t,o=e;this.container.innerHTML="";for(let i=0;i<s.length;i+=1){const a=s[i],c=g(a),d=document.createElement("div");d.dataset.name=a,d.classList.add("list");const r=document.createElement("div");r.classList.add("description");const l=document.createElement("p");l.tabIndex=0,l.classList.add("list-name"),l.dataset.name=`${a}-btn`,l.textContent=c;const h=document.createElement("p");h.classList.add("how-many"),h.textContent=o[i];const u=document.createElement("i");u.tabIndex=0,u.classList.add("list-del","fa-solid","fa-trash"),u.dataset.name=`${a}-btn`,r.appendChild(l),r.appendChild(h),d.appendChild(r),d.appendChild(u);const m=document.createElement("div");m.classList.add("list-delete-form");const w=document.createElement("p");w.textContent=d.dataset.name==="Todos"||d.dataset.name==="Complete"?"clear?":"delete?";const L=document.createElement("div");L.classList.add("options");const f=document.createElement("i");f.classList.add("fa-solid","fa-check","options-btn"),f.dataset.name=`${a}-opt`;const T=document.createElement("i");T.classList.add("fa-solid","fa-xmark","options-btn"),T.dataset.name=`${a}-opt`,L.appendChild(f),L.appendChild(T),m.appendChild(w),m.appendChild(L),d.appendChild(m),this.container.appendChild(d)}}updateListCount(t,e){if(Array.isArray(e)&&Array.isArray(t)){e.forEach((s,o)=>{document.querySelector(`[data-name="${s}"] .how-many`).textContent=t[o]});return}document.querySelector(`[data-name="${e}"] .how-many`).textContent=t}createListOption(t){if(t==="Complete")return;const e=document.createElement("option");e.setAttribute("value",t),e.textContent=g(t),this.listDropdown.appendChild(e)}renderListOptions(t){this.listDropdown.innerHTML="",t.forEach(e=>{this.createListOption(e)})}showMobileSidebar(){this.sidebar.style.transform="translate(0,0)",this.sidebar.style.overflow="hidden"}hideMobileSidebar(){this.sidebar.style.transform="translate(-100%, 0)"}toggleListDeleteForm(t){t.classList.toggle("show")}toggleTabbing(t,e){const s=document.querySelectorAll(`[data-name="${t}-btn"]`),o=document.querySelectorAll(`[data-name="${t}-opt"]`);if(e){S(s),y(o);return}S(o),y(s)}update(t,e){this.renderLists(t,e),this.renderListOptions(t)}bindMobileViewEvents(){this.showNav.addEventListener("click",()=>{this.showMobileSidebar()}),this.hideNav.addEventListener("click",()=>{this.hideMobileSidebar()})}bindListFormEvents(){this.addList.addEventListener("click",()=>{this.formWrapper.previousElementSibling.style.display!=="block"&&this.showForm(this.formWrapper,this.form)}),this.formClose.addEventListener("click",()=>{this.hideForm(this.formWrapper),this.form.reset()})}bindListSubmit(t){this.form.addEventListener("submit",e=>{e.preventDefault(),t(e)})}bindRevealListOptions(t){document.addEventListener("click",e=>{e.target.closest(".list-del")&&t(e)}),document.addEventListener("keydown",e=>{e.key==="Enter"&&e.target.closest(".list-del")&&t(e)})}bindListDelete(t){document.addEventListener("click",e=>{e.target.matches(".fa-check")&&t(e)}),document.addEventListener("keydown",e=>{e.key==="Enter"&&e.target.matches(".fa-check")&&t(e)})}bindCloseListOptions(t){document.addEventListener("click",e=>{e.target.matches(".fa-xmark")&&t(e)}),document.addEventListener("keydown",e=>{e.key==="Enter"&&e.target.matches(".fa-xmark")&&t(e)})}bindListSwitch(t){document.addEventListener("click",e=>{e.target.matches(".list-name")&&t(e)}),document.addEventListener("keydown",e=>{e.key==="Enter"&&e.target.matches(".list-name")&&t(e)})}bindListOnLoad(t){this.setHeading(),t()}}class x{constructor(t){this.state=t}handleTodoSubmit(t){const e=new FormData(t.target);this.state.todo.saveData(e);const s=e.get("list"),o=this.state.todo.getTodos(s);this.state.TodoView.renderTodos(o,s);const i=this.state.todo.getTotalTodos(s);this.state.ListView.updateListCount(i,s),this.state.TodoView.hideForm(),this.state.TodoView.resetTitleAndDate()}handleTodoEdit(t){const e=t.target.closest(".todo"),{id:s}=e,o=document.querySelector(".current-list"),i=o.textContent,a=o.dataset.name,c=document.querySelectorAll(`[data-name="${s}-input"]`);if(c[0].disabled)this.state.TodoView.enableEdit(c);else{this.state.TodoView.disableEdit(c);const d=this.state.todo.constructor.getUpdatedValues(c);if(this.state.todo.updateEdit(s,i,d),d[2]===!0){this.state.todo.addToCompleted(a,s);const r=this.state.todo.getTodos(a);this.state.TodoView.renderTodos(r,i);const l=this.state.list.getLists(),h=this.state.list.getListCounts();this.state.ListView.updateListCount(h,l)}}}handleTodoDelete(t){const e=t.target.closest(".todo"),{id:s}=e,o=e.dataset.name;this.state.todo.delete(s,o);const i=this.state.todo.getTodos(o);this.state.TodoView.renderTodos(i,o),this.state.ListView.updateListCount(this.state.todo.getTotalTodos(o),o)}handleTodoSelectChange(t){const e=t.target.value,s=g(e);this.state.TodoView.updateTodoListTitle(s);const o=this.state.todo.getTodos(e);this.state.TodoView.renderTodos(o,e)}handleTodosOnLoad(){const t=this.state.list.getLastViewed(),e=this.state.todo.getTodos(t);this.state.TodoView.renderTodos(e,t),this.state.TodoView.updateTodoListTitle(t)}init(){this.state.TodoView.bindTodoFormEvents(),this.state.TodoView.bindTodoSubmit(this.handleTodoSubmit.bind(this)),this.state.TodoView.bindTodoEdit(this.handleTodoEdit.bind(this)),this.state.TodoView.bindTodoDelete(this.handleTodoDelete.bind(this)),this.state.TodoView.bindTodoSelectChange(this.handleTodoSelectChange.bind(this)),this.state.TodoView.bindTodoOnLoad(this.handleTodosOnLoad.bind(this))}}class A{constructor(t){this.state=t}handleListSubmit(t){this.state.list.addListToStorage(t.target[0].value);const e=this.state.list.getLists(),s=this.state.list.getListCounts();this.state.ListView.update(e,s),this.state.ListView.hideForm(),t.target.reset()}handleRevealListOptions(t){const e=t.target.parentElement.dataset.name,s=document.querySelectorAll(`[data-name=${e}-opt]`)[1];this.state.ListView.toggleListDeleteForm(t.target.nextSibling),setTimeout(()=>s.focus(),0),this.state.ListView.toggleTabbing(e,!0)}handleListDelete(t){const s=t.target.closest(".list").dataset.name;if(s==="Todos"||s==="Complete"){this.state.list.clearTodos(s),this.state.TodoView.renderTodos([],s),this.state.ListView.updateListCount(0,s),this.state.ListView.toggleListDeleteForm(t.target.closest(".list-delete-form")),this.state.ListView.toggleTabbing(s,!1);return}this.state.list.delete(s),this.state.list.setLastViewedList(),this.state.ListView.update(this.state.list.getLists(),this.state.list.getListCounts()),this.state.TodoView.renderTodos(this.state.todo.getTodos()),this.state.TodoView.updateTodoListTitle()}handleCloseListOptions(t){const e=t.target.closest(".list").dataset.name;this.state.ListView.toggleListDeleteForm(t.target.closest(".list-delete-form")),this.state.ListView.toggleTabbing(e,!1)}handleListSwitch(t){const e=t.target.closest(".list").dataset.name;this.state.list.setLastViewedList(e),this.state.TodoView.updateTodoFormListSelection(e),this.state.TodoView.updateTodoListTitle(e);const s=this.state.todo.getTodos(e);this.state.TodoView.renderTodos(s,e),window.innerWidth<1080&&this.state.ListView.hideMobileSidebar()}handleListsOnLoad(){const t=this.state.list.getLists(),e=this.state.list.getListCounts();this.state.ListView.update(t,e)}init(){this.state.ListView.bindListFormEvents(),this.state.ListView.bindMobileViewEvents(),this.state.ListView.bindListSubmit(this.handleListSubmit.bind(this)),this.state.ListView.bindRevealListOptions(this.handleRevealListOptions.bind(this)),this.state.ListView.bindListDelete(this.handleListDelete.bind(this)),this.state.ListView.bindCloseListOptions(this.handleCloseListOptions.bind(this)),this.state.ListView.bindListSwitch(this.handleListSwitch.bind(this)),this.state.ListView.bindListOnLoad(this.handleListsOnLoad.bind(this))}}const E={list:new k,todo:new V,ListView:new q,TodoView:new O};document.addEventListener("DOMContentLoaded",()=>{p.getDataFromLocal();const n=new x(E),t=new A(E);n.init(),t.init()});
