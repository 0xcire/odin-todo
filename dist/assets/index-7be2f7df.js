(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const r of d.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&e(r)}).observe(document,{childList:!0,subtree:!0});function s(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerpolicy&&(d.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?d.credentials="include":o.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function e(o){if(o.ep)return;o.ep=!0;const d=s(o);fetch(o.href,d)}})();const l={showNav:document.querySelector(".show-nav"),hideNav:document.querySelector(".hide-nav"),sidebar:document.querySelector("#sidebar"),currentDate:document.querySelector(".current-date"),currentList:document.querySelector(".current-list"),todoFormDiv:document.querySelector(".todo-form"),todoForm:document.querySelector(".todo-form form"),addTodo:document.querySelector(".add-todo"),addList:document.querySelector(".add-project"),listFormDiv:document.querySelector(".list-form"),listForm:document.querySelector(".list-form form"),listSelect:document.querySelector("#list-dropdown"),listFormInput:document.querySelector("#list"),listClose:document.querySelector(".list-form-cancel"),todoClose:document.querySelector(".todo-form-cancel"),todosWrapper:document.querySelector(".todos"),listsWrapper:document.querySelector("#lists"),todoCount:document.querySelector(".how-many"),listDropdown:document.querySelector("#list-dropdown")},b=n=>n.replace(/-/g," "),y=n=>n.replace(/\s+/g,"-"),W=n=>{const t=n;t.style.display="block"},D=n=>{const t=n;t.style.display="none"},I=n=>{n.forEach(s=>{s.disabled=!1,s.style.color="var(--accent-color)"})},O=n=>{n.forEach(s=>{s.disabled=!0,s.style.color="var(--tertiary-color)"})},h=(n,t,s="All")=>{const e=n;e.innerHTML="";const o=t;for(let d=0;d<o.length;d+=1){const r=document.createElement("div");r.classList.add("todo"),r.setAttribute("id",o[d].id),r.dataset.name=s;const u=document.createElement("div");u.classList.add("text");const c=document.createElement("div");c.classList.add("completion");const i=document.createElement("input");i.setAttribute("id","todo-title");const m=document.createElement("input");m.setAttribute("id","todo-date");const p=document.createElement("input");p.setAttribute("id","done");const L=document.createElement("i");L.classList.add("edit","fa-solid","fa-pen-to-square");const v=document.createElement("button");v.classList.add("delete");const g=document.createElement("i");g.classList.add("fa-solid","fa-trash"),i.setAttribute("type","text"),i.setAttribute("name","todo-title"),i.setAttribute("value",o[d].title),i.setAttribute("disabled",!0),m.setAttribute("type","date"),m.setAttribute("name","todo-date"),m.value=o[d].due,m.setAttribute("required",!0),m.setAttribute("disabled",!0),p.setAttribute("type","checkbox"),p.setAttribute("name","done"),p.setAttribute("disabled",!0),p.checked=o[d].completed,v.appendChild(g),u.appendChild(i),u.appendChild(m),c.appendChild(p),c.appendChild(L),c.appendChild(v),r.appendChild(u),r.appendChild(c),n.appendChild(r)}},M=n=>{const t=n[0],s=n[1];t.value="",s.value=""},$=n=>{n!=="Complete"&&(document.querySelector(`option[value='${n}']`).selected=!0)},T=(n="All")=>{l.currentList.dataset.name=n,l.currentList.textContent=b(n)},U=()=>{const{addTodo:n,todoClose:t,todoForm:s,todoFormDiv:e,listFormDiv:o}=l;n.addEventListener("click",()=>{o.style.display!=="block"&&(W(e),window.innerWidth<1080&&(l.sidebar.style.transform="translate(-100%, 0)"))}),t.addEventListener("click",()=>{D(e),s.reset()})};let H=(n=21)=>crypto.getRandomValues(new Uint8Array(n)).reduce((t,s)=>(s&=63,s<36?t+=s.toString(36):s<62?t+=(s-26).toString(36).toUpperCase():s>62?t+="-":t+="_",t),"");class V{constructor(){this.todos={All:[],Complete:[]}}removeList(t){delete this.todos[t],this.pushToLocalStorage()}static localIsEmpty(){return localStorage.getItem("todos")===null}static clearLocalStorage(){return localStorage.clear()}setDataFromLocal(t){this.todos=JSON.parse(t)}pushToLocalStorage(){localStorage.setItem("todos",JSON.stringify(this.todos))}getTodosFromLocal(t){const s=t,e=localStorage.getItem("todos");this.constructor.localIsEmpty()?s.innerHTML="":this.setDataFromLocal(e)}}const f=new V;class j{constructor(){this.storage=f}delete(t,s){const e=y(s),o=this.storage.todos[e].findIndex(d=>d.id===t);this.storage.todos[e].splice(o,1),f.pushToLocalStorage()}updateEdit(t,s,e){const o=y(s),[d,r,u]=e;for(let c=0;c<this.storage.todos[o].length;c+=1)this.storage.todos[o][c].id===t&&(this.storage.todos[o][c].title=d,this.storage.todos[o][c].due=r,this.storage.todos[o][c].completed=u);f.pushToLocalStorage()}static getUpdatedValues(t){return t.map(e=>e.type==="checkbox"?e.checked:e.value)}saveData(t){const s=t.get("list"),e={id:H(),title:t.get("title"),due:t.get("due"),completed:!1};return this.storage.todos[s].push(e),this.storage.pushToLocalStorage(),e}getTodos(t="All"){return this.storage.todos[t]}getTotalTodos(t){return this.storage.todos[t].length}addToCompleted(t,s){const e=this.storage.todos[t].findIndex(d=>d.id===s),o=this.storage.todos[t].splice(e,1);this.storage.todos.Complete.push(o[0]),this.storage.pushToLocalStorage(),console.log(o)}}const x=n=>{const t=n;t.style.display="none"},J=n=>{const t=n;t.style.display="block"},q=(n,t,s)=>{const e=t,o=n;o.innerHTML="";for(let d=0;d<e.length;d+=1){const r=e[d],u=s.todos[e[d]].length,c=b(r),i=document.createElement("div");i.dataset.name=r,i.classList.add("list");const m=document.createElement("div");m.classList.add("description");const p=document.createElement("p");p.classList.add("list-name");const L=document.createElement("p");L.classList.add("how-many"),L.textContent=u;const v=document.createElement("i");v.classList.add("list-del","fa-solid","fa-trash"),p.textContent=c,m.appendChild(p),m.appendChild(L),i.appendChild(m),i.appendChild(v),n.appendChild(i);const g=document.createElement("div");g.classList.add("list-delete-form");const F=document.createElement("p");F.textContent=i.dataset.name==="All"||i.dataset.name==="Complete"?"clear?":"delete?";const C=document.createElement("div");C.classList.add("options");const A=document.createElement("i");A.classList.add("fa-solid","fa-check","options-btn");const w=document.createElement("i");w.classList.add("fa-solid","fa-xmark","options-btn"),C.appendChild(A),C.appendChild(w),g.appendChild(F),g.appendChild(C),i.appendChild(g)}},E=(n,t)=>{document.querySelector(`[data-name="${t}"] .how-many`).textContent=n},k=(n,t)=>{if(n==="Complete")return;const s=document.createElement("option"),e=y(n);s.setAttribute("value",e),s.textContent=n,t.appendChild(s)},P=n=>{document.querySelector(`option[value=${n}]`).remove()},K=()=>{l.sidebar.style.transform="translate(0,0)"},N=()=>{l.sidebar.style.transform="translate(-100%, 0)"},S=n=>{n.classList.toggle("show")},R=()=>{l.showNav.addEventListener("click",()=>{K()}),l.hideNav.addEventListener("click",()=>{N()})},_=()=>{const{addList:n,listClose:t,listForm:s,listFormDiv:e,todoFormDiv:o}=l;n.addEventListener("click",()=>{o.style.display!=="block"&&J(e)}),t.addEventListener("click",()=>{x(e),s.reset()})};class z{constructor(){this.storage=f}addListToStorage(t){const s=y(t);this.storage.todos[s]=[],this.storage.pushToLocalStorage()}getTodos(t="All"){return this.storage.todos[t]}clearTodos(t="All"){this.storage.todos[t]=[],this.storage.pushToLocalStorage()}getLists(){return Object.keys(this.storage.todos)}delete(t){document.querySelector(`[data-name='${t}']`).remove(),this.storage.removeList(t)}}const a={list:new z,todo:new j};document.addEventListener("DOMContentLoaded",()=>{const n=new Date,t=new Intl.DateTimeFormat("en-US").format(n);l.currentDate.textContent=t,f.getTodosFromLocal(l.todosWrapper)});const B=()=>{const{listFormInput:n,listsWrapper:t,listDropdown:s}=l;_(),R(),l.listForm.addEventListener("submit",e=>{e.preventDefault();const o=n.value;a.list.addListToStorage(o),x(e.target.parentElement);const d=a.list.getLists();q(t,d,f),k(o,s),e.target.reset()}),document.addEventListener("click",e=>{const o=e.target.closest(".list-del");let d,r;if(o&&S(e.target.parentElement.lastChild),e.target.matches(".fa-check")){if(d=e.target.parentElement.parentElement.parentElement,r=d.dataset.name,r==="All"||r==="Complete"){a.list.clearTodos(r),h(l.todosWrapper,[]),S(e.target.parentElement.parentElement),E(a.todo.getTotalTodos(r),r);return}S(e.target.parentElement.parentElement),a.list.delete(r),P(r);const u=a.todo.getTodos();h(l.todosWrapper,u),T()}e.target.matches(".fa-xmark")&&S(e.target.parentElement.parentElement)}),document.addEventListener("DOMContentLoaded",()=>{const e=a.list.getLists();console.log(e),q(t,e,f),e.forEach(o=>{k(o,s)})})};B();const G=()=>{const{todoForm:n,todosWrapper:t}=l;U(),n.addEventListener("submit",s=>{s.preventDefault();const e=new FormData(n);a.todo.saveData(e);const o=e.get("list");D(s.target.parentElement);const d=a.todo.getTodos(o);h(t,d,o);const r=a.todo.getTotalTodos(o);E(r,o),M(n)}),document.addEventListener("click",s=>{if(s.target.closest(".edit")){const e=s.target.closest(".todo"),{id:o}=e,d=document.querySelector(".current-list").textContent,r=e.children[0].children,u=e.children[1].children[0],c=[].slice.call(r);if(c.push(u),r[0].disabled)I(c);else{O(c);const i=a.todo.constructor.getUpdatedValues(c);if(a.todo.updateEdit(o,d,i),console.log(i),i[2]===!0){console.log("to completed"),a.todo.addToCompleted(y(d),o);const m=a.todo.getTodos(d);h(l.todosWrapper,m,d),E(a.todo.getTotalTodos(d),d),E(a.todo.getTotalTodos("Complete"),"Complete")}}}}),document.addEventListener("click",s=>{if(s.target.closest(".delete")){const e=s.target.closest(".todo"),{id:o}=e,d=e.dataset.name;a.todo.delete(o,d);const r=a.todo.getTodos(d);h(l.todosWrapper,r,d);const u=a.todo.getTotalTodos(d);E(u,d)}}),document.addEventListener("click",s=>{if(s.target.closest(".list-name")){const e=s.target.textContent,o=y(e);$(o),T(o);const d=a.todo.getTodos(o);h(l.todosWrapper,d,o),window.innerWidth<1080&&N()}}),l.listSelect.addEventListener("change",s=>{if(s.target.matches("#list-dropdown")){const e=s.target.value,o=b(e);T(o);const d=a.todo.getTodos(e);h(l.todosWrapper,d,e)}}),document.addEventListener("DOMContentLoaded",()=>{const s=a.todo.getTodos();h(l.todosWrapper,s),T()})};G();
