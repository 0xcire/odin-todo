(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))d(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&d(n)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function d(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();const l={currentDate:document.querySelector(".current-date"),currentList:document.querySelector(".current-list"),todoFormDiv:document.querySelector(".todo-form"),todoForm:document.querySelector(".todo-form form"),addTodo:document.querySelector(".add-todo"),addList:document.querySelector(".add-project"),listFormDiv:document.querySelector(".list-form"),listForm:document.querySelector(".list-form form"),listFormInput:document.querySelector("#list"),todosWrapper:document.querySelector(".todos"),listsWrapper:document.querySelector("#lists"),todoCount:document.querySelector(".how-many"),listDropdown:document.querySelector("#list-dropdown")};class f{constructor(t){this.todos=t}toggleTodoForm(t){t.offsetParent?t.style.display="none":t.style.display="block"}toggleEdit(t){const e=t.target.closest(".todo").children[0].children;[].slice.call(e).forEach(s=>{s.disabled?s.disabled=!1:s.disabled=!0})}renderTodos(t,e,d){t.innerHTML="";const s=e(d);for(let o=0;o<s.length;o++){const n=document.createElement("div");n.classList.add("todo"),n.setAttribute("id",s[o].id);const i=document.createElement("div");i.classList.add("text");const a=document.createElement("div");a.classList.add("completion");const c=document.createElement("input");c.setAttribute("id","todo-title");const m=document.createElement("input");m.setAttribute("id","todo-date");const p=document.createElement("input");p.setAttribute("id","done");const h=document.createElement("i");h.classList.add("edit","fa-solid","fa-pen-to-square");const g=document.createElement("button");g.classList.add("delete");const L=document.createElement("i");L.classList.add("fa-solid","fa-trash"),c.setAttribute("type","text"),c.setAttribute("name","todo-title"),c.setAttribute("value",s[o].title),c.setAttribute("disabled",!0),m.setAttribute("type","date"),m.setAttribute("name","todo-date"),m.value=s[o].due,m.setAttribute("required",!0),m.setAttribute("disabled",!0),p.setAttribute("type","checkbox"),p.setAttribute("name","done"),g.appendChild(L),i.appendChild(c),i.appendChild(m),a.appendChild(p),a.appendChild(h),a.appendChild(g),n.appendChild(i),n.appendChild(a),t.appendChild(n)}}resetTitleAndDate(t){t[0].value="",t[1].value=""}updateTodoListCount(t,e){document.querySelector(`#${e} .how-many`).textContent=t(e)}updateTodoFormListSelection(t){document.querySelector(`option[value=${t}]`).selected=!0}updateTodoListTitle(t){l.currentList.textContent=t}handleTodoFormToggle(t){l.addTodo.addEventListener("click",()=>{l.listFormDiv.style.display!=="block"&&this.toggleTodoForm(l.todoFormDiv)})}handleTodoEdit(t){document.addEventListener("click",e=>{e.target.closest(".edit")&&this.toggleEdit(e)})}}let y=(r=21)=>crypto.getRandomValues(new Uint8Array(r)).reduce((t,e)=>t+=(e&=63)<36?e.toString(36):e<62?(e-26).toString(36).toUpperCase():e>62?"-":"_","");class T{constructor(t){this.todos={All:[]}}removeList(t){delete this.todos[t],this.pushToLocalStorage()}localIsEmpty(){return localStorage.getItem("todos")===null}clearLocalStorage(){return localStorage.clear()}setDataFromLocal(t){this.todos=JSON.parse(t)}pushToLocalStorage(){localStorage.setItem("todos",JSON.stringify(this.todos))}getTodosFromLocalStorage(t){const e=localStorage.getItem("todos");this.localIsEmpty()?t.innerHTML="":this.setDataFromLocal(e)}}const u=new T;class S{constructor(){this.storage=u}delete(t,e){const d=this.storage.todos[e].findIndex(s=>s.id===t);this.storage.todos[e].splice(d,1),u.pushToLocalStorage()}updateEdit(t,e,d,s){for(let o=0;o<this.storage.todos[e].length;o++)this.storage.todos[e][o].id===t&&(this.storage.todos[e][o].title=d,this.storage.todos[e][o].due=s,console.log(this.storage.todos));u.pushToLocalStorage()}getUpdatedValues(t,e,d){e(t),console.log(d);const s=d.id,o=d.parentElement.previousElementSibling.textContent,n=d.children[0].children[0].value,i=d.children[0].children[1].value;this.updateEdit(s,o,n,i)}saveData(t){const e=t.get("list");let d={id:y(),title:t.get("title"),due:t.get("due")};return this.storage.todos[e].push(d),this.storage.pushToLocalStorage(),d}getTodos(t){return this.storage.todos[t]}getTodoListLength(t){return this.storage.todos[t].length}}class b{constructor(t){this.lists=t}toggleListForm(t){t.offsetParent?t.style.display="none":t.style.display="block"}renderLists(t,e){const d=e();t.innerHTML="";for(let s=0;s<d.length;s++){const o=d[s],n=document.createElement("div");n.setAttribute("id",o),n.classList.add("list");const i=document.createElement("p");i.dataset.name=o,i.classList.add("list-name");const a=document.createElement("p");a.classList.add("how-many");const c=document.createElement("i");c.classList.add("list-del","fa-solid","fa-trash"),i.textContent=o,n.appendChild(i),n.appendChild(a),n.appendChild(c),t.appendChild(n)}}noListName(t){return t===""}getListName(){return l.listFormInput.value}updateListCount(t){document.querySelectorAll(".list").forEach(e=>{const d=e.children[1];d.textContent=t.todos[e.id].length})}createListSelection(t,e){const d=document.createElement("option");d.setAttribute("value",t),d.textContent=t,e.appendChild(d)}handleListFormToggle(t){l.addList.addEventListener("click",()=>{l.todoFormDiv.style.display!=="block"&&this.toggleListForm(l.listFormDiv)})}}class v{constructor(){this.storage=u}addListToStorage(t){this.storage.todos[t]=[],this.storage.pushToLocalStorage()}getLists(){return Object.keys(this.storage.todos)}delete(t){document.querySelector(`#${t}`).remove(),u.removeList(t)}edit(){}}document.addEventListener("DOMContentLoaded",()=>{const t=new Date().toString().split(" ").slice(0,4).join(" ");l.currentDate.textContent=t,u.getTodosFromLocalStorage(l.todosWrapper)});const E=()=>{const r=new b,t=new v;r.renderLists(l.listsWrapper,t.getLists.bind(t)),r.handleListFormToggle(),l.listForm.addEventListener("submit",e=>{e.preventDefault();const{listForm:d,listFormInput:s,listFormDiv:o,listsWrapper:n,listDropdown:i}=l,a=r.getListName(s);r.noListName(a)||(t.addListToStorage(a),r.toggleListForm(o),r.renderLists(n,t.getLists.bind(t)),r.updateListCount(u),r.createListSelection(a,i),d.reset())}),document.addEventListener("click",e=>{const d=e.target.closest(".list-del");if(!(d&&d.parentElement.id==="All")&&d){const s=d.parentElement.id;t.delete(s)}}),document.addEventListener("DOMContentLoaded",()=>{r.renderLists(l.listsWrapper,t.getLists.bind(t)),t.getLists().forEach(d=>{r.createListSelection(d,l.listDropdown);const s=u.todos[d].length;document.querySelector(`#${d} .how-many`).textContent=s})})};E();const C=()=>{const r=new f,t=new S,{todoForm:e,todoFormDiv:d,todosWrapper:s}=l;r.handleTodoFormToggle(),e.addEventListener("submit",o=>{o.preventDefault();const n=new FormData(e);if(n.get("title")==="")return;t.saveData(n);const i=n.get("list");r.toggleTodoForm(d),r.renderTodos(s,t.getTodos.bind(t),i),r.updateTodoListCount(t.getTodoListLength.bind(t),i),r.resetTitleAndDate(e)}),document.addEventListener("click",o=>{if(o.target.closest(".edit")){const n=o.target.closest(".todo");n.children[0].children[0].disabled?r.toggleEdit(o):t.getUpdatedValues(o,r.toggleEdit,n)}}),document.addEventListener("click",o=>{if(o.target.closest(".delete")){const n=o.target.closest(".todo"),i=n.id,a=n.parentElement.previousElementSibling.textContent;t.delete(i,a),r.renderTodos(l.todosWrapper,t.getTodos.bind(t),a),r.updateTodoListCount(t.getTodoListLength.bind(t),a)}}),document.addEventListener("click",o=>{if(o.target.closest(".list-name")){const n=o.target.dataset.name;r.updateTodoFormListSelection(n),r.updateTodoListTitle(n),r.renderTodos(l.todosWrapper,t.getTodos.bind(t),n)}}),document.addEventListener("DOMContentLoaded",()=>{r.renderTodos(l.todosWrapper,t.getTodos.bind(t),"All")})};C();
